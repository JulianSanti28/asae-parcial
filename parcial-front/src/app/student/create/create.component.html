<div class="card card-sm mb-3">
  <div class="card-header">
    Formulario de Alumno
  </div>
  <div class="card-body">
    <form [formGroup]="studentForm">
      <div class="form-group">
        <label>Número de Identificación:</label>
        <input type="number" formControlName="identificationNumber" class="form-control" />
        <!--Validaciones-->
        <ng-template [ngIf]="identificationNumber?.getError('required') && (identificationNumber?.dirty || identificationNumber?.touched)">
          <div class="alert alert-danger">
              <div class="container-error-message">
                El campo número de identificación es requerido
              </div>
           </div>
        </ng-template>
        <ng-template [ngIf]="identificationNumber?.valid && (identificationNumber?.dirty || identificationNumber?.touched)">
          <div class="alert alert-success">
              <div class="container-success-message">
                Numero de identificación es correcto!
              </div>
            </div>
        </ng-template>
      </div>
      <div class="form-group">
        <label>Tipo de Identificación:</label>
        <input type="text" formControlName="identificationType" class="form-control" />
        <!--Validaciones-->
        <ng-template [ngIf]="identificationType?.getError('minlength') && (identificationType?.dirty || identificationType?.touched)">
          <div class="alert alert-danger">
              <div class="container-error-message">
                El campo tipo de identificacion no cumple la longitud mínima
              </div>
           </div>
        </ng-template>
        <ng-template [ngIf]="identificationType?.valid && (identificationType?.dirty || identificationType?.touched)">
          <div class="alert alert-success">
              <div class="container-success-message">
                El campo tipo de identificacion es correcto!
              </div>
            </div>
        </ng-template>
      </div>
      <div class="form-group">
        <label>Fecha Ingreso:</label>
        <input type="date" formControlName="entryDate" class="form-control"/>
        <div class="alert alert-danger" *ngIf="this.entryDate?.invalid && (this.entryDate?.dirty || this.entryDate?.touched)">
          <div *ngIf="this.entryDate?.errors?.['required']">
            La fecha  es requerido
          </div>
        </div>
        <div class="alert alert-danger" *ngIf="futureDate()">
          <div class="container-error-message">
            Fecha en el futuro
          </div>
       </div>

      </div>
      <div class="form-group">
        <label>Nombre:</label>
        <input type="text" formControlName="name" class="form-control" />
        <!--Validaciones-->
        <ng-template [ngIf]="name?.getError('maxlength') && (name?.dirty || name?.touched)">
          <div class="alert alert-danger">
              <div class="container-error-message">
                El campo nombre no cumple la longitud mínima
              </div>
           </div>
        </ng-template>
        <ng-template [ngIf]="name?.getError('minlength') && (name?.dirty || name?.touched)">
          <div class="alert alert-danger">
              <div class="container-error-message">
                El campo nombre no cumple la longitud maxima
              </div>
            </div>
        </ng-template>
        <ng-template [ngIf]="name?.valid && (name?.dirty || name?.touched)">
          <div class="alert alert-success">
              <div class="container-success-message">
                Campo nombre es correcto!
              </div>
            </div>
        </ng-template>
      </div>
      <div class="form-group">
        <label>Apellido:</label>
        <input type="text" formControlName="lastName" class="form-control" />
        <!--Validaciones-->
        <ng-template [ngIf]="lastName?.getError('maxlength') && (lastName?.dirty || lastName?.touched)">
          <div class="alert alert-danger">
              <div class="container-error-message">
                  El campo no supera la longitud mínima
              </div>
           </div>
        </ng-template>
        <ng-template [ngIf]="lastName?.getError('minlength') && (lastName?.dirty || lastName?.touched)">
          <div class="alert alert-danger">
              <div class="container-error-message">
                  El campo supera la longitud máxima
              </div>
            </div>
        </ng-template>
        <ng-template [ngIf]="lastName?.valid && (lastName?.dirty || lastName?.touched)">
          <div class="alert alert-success">
              <div class="container-success-message">
                  Campo apellido es correcto!
              </div>
            </div>
        </ng-template>
      </div>
      <div class="form-group">
        <label>Email:</label>
        <input type="email" formControlName="email" class="form-control" />
        <!--Validaciones-->
        <ng-template [ngIf]="email?.getError('pattern') && (email?.dirty || email?.touched)">
          <div class="alert alert-danger">
              <div class="container-error-message">
                Email Inválido
              </div>
           </div>
      </ng-template>
      <ng-template [ngIf]="email?.valid && (email?.dirty || email?.touched)">
          <div class="alert alert-success">
              <div class="container-success-message">
                  Email Correcto!
              </div>
            </div>
      </ng-template>
      </div>
      <div class="form-group" formGroupName="address">
        <label>Dirección:</label>
        <input type="text" formControlName="ubication" placeholder="Ubicación" class="form-control" />
        <!--Validaciones-->
        <ng-template [ngIf]="address?.get('ubication')?.hasError('minlength') && (address?.get('ubication')?.dirty || address?.get('ubication')?.touched)">
          <div class="alert alert-danger">
            <div class="container-error-message">
              El campo no supera la longitud mínima
            </div>
          </div>
        </ng-template>
        <ng-template [ngIf]="address?.get('ubication')?.valid && (address?.get('ubication')?.dirty || address?.get('ubication')?.touched)">
          <div class="alert alert-success">
              <div class="container-success-message">
                  Dirección correcta!
              </div>
            </div>
       </ng-template>
      </div>
      <div class="form-group card-header bg-dark-opacity" formArrayName="telephones">
        <div *ngFor="let phone of telephones.controls; let i = index">
          <div class="form-group" [formGroupName]="i">
            <label>Tipo:</label>
            <input type="text" formControlName="type" class="form-control" />
            <ng-template [ngIf]="phone?.get('type')?.hasError('minlength') && (phone.get('type')?.dirty || phone?.get('type')?.touched)">
              <div class="alert alert-danger">
                <div class="container-error-message">
                  El tipo de teléfono no supera la longitud mínima
                </div>
              </div>
            </ng-template>
            <ng-template [ngIf]="phone?.get('type')?.valid && (phone.get('type')?.dirty || phone?.get('type')?.touched)">
              <div class="alert alert-success">
                  <div class="container-success-message">
                      Tipo de teléfono correcto!
                  </div>
                </div>
           </ng-template>
            <label>Número:</label>
            <input type="number" formControlName="number" class="form-control" />
            <ng-template [ngIf]="phone?.get('number')?.hasError('pattern') && (phone.get('number')?.dirty || phone?.get('number')?.touched)">
              <div class="alert alert-danger">
                <div class="container-error-message">
                  El número no cumple con las especificaciones dadas
                </div>
              </div>
            </ng-template>
            <ng-template [ngIf]="phone?.get('number')?.valid && (phone.get('number')?.dirty || phone?.get('number')?.touched)">
              <div class="alert alert-success">
                  <div class="container-success-message">
                      Número correcto!
                  </div>
                </div>
           </ng-template>
            <br>
            <button (click)="removePhone(i)" class="btn btn-danger">Eliminar</button>
          </div>

        </div>
        <div class="alert alert-danger" *ngIf="telephones.length < 2">
          <div *ngIf="this.name?.errors?.['required']">
            Se deben registrar minimo 2 telefonos
          </div>
        </div>
      </div>
      <br>
      <div class="form-group">
        <button (click)="addPhone()" class="btn btn-warning">Agregar Teléfono</button>
      </div>
      <div class="form-group">
        <button type="submit" (click)="saveStudent()" class="btn btn-info"  [disabled]="studentForm.invalid||telephones.length<2||futureDate()" >Enviar</button>
      </div>
    </form>
  </div>
</div>



